<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏ì‡∏¥‡∏ä‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏≤‡∏á‡∏ô‡∏≤ </title>


<style>
:root{
  --bg:#f7f9fc;
  --panel:#ffffff;
  --primary:#4dabf7;
  --road:#4e4e4e;
  --learn:#b7e4c7;
  --important:#90dbf4;
  --sport:#74c69d;
}
/*‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô****/
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:var(--bg);
  display: flow-root;
  height:100vh;
}

/* Sidebar */
#sidebar{
  width:320px;
  background:var(--panel);
  box-shadow:2px 0 12px rgba(0,0,0,.1);
  padding:16px;
}
#sidebar h2{margin-top:0}
input,select,button{
  width:100%;
  padding:8px 10px;
  margin-bottom:8px;
  border-radius:8px;
  border:1px solid #0e0d0d;
}
button{
  background: linear-gradient(135deg,#6dbdff,#6de2ff);
  box-shadow: 0 4px 10px rgba(0,0,0,.4);
}
button:hover{opacity:.9}
#info{
  margin-top:8px;
  padding:10px;
  background:#f1f5f9;
  border-radius:8px;
  font-size:14px;
}

/* Map */
#map-wrap{flex:1; overflow:hidden;}
svg{
  background:#eef2f7;
  cursor:grab;
}
.road{fill:var(--road)}

.learn{fill:var(--learn)}
.important{fill:var(--important)}
.sport{fill:var(--sport)}
.highlight{stroke:#ff595e; stroke-width:3}

/*‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£*/
.label{
  font-size:14px;
  text-anchor:middle;
  pointer-events:none;
  fill:#020202;
  font-weight:700;
}

/* Route */
#route{
  stroke:#ff0000;
  stroke-width:6;
  fill:none;
  stroke-linecap:round;
  stroke-dasharray:12 8;
  animation: dash 1s linear infinite;
  filter: drop-shadow(0 0 8px #ff0000);
}

@keyframes dash{
  to{stroke-dashoffset:-20}
}


/*‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏°‡∏≤‡∏™‡πå‡πÑ‡∏õ‡πÇ‡∏î‡∏ô‡∏ï‡∏∂‡∏Å*/
.building{
  stroke:#2f3e46;
  stroke-width:1.2;
  rx:10; ry:10;
  cursor:pointer;
  transition:.2s;
  filter: drop-shadow(2px 3px 3px rgba(0,0,0,.15));
}
.building:hover{
  transform:translateY(-2px);
  filter: drop-shadow(0 0 15px rgb(255, 0, 0));
}
/* ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å */
.building.selected{
  stroke:#f3615c;
  stroke-width:4;
  filter:
    drop-shadow(0 0 12px #ee6868)
    drop-shadow(0 0 25px rgba(255, 104, 104, 0.8));
  animation: selectPulse .8s ease;
}

/* ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô */
.building.dim{
  opacity:0.3;
}

/* ‡πÄ‡∏î‡πâ‡∏á‡πÄ‡∏ö‡∏≤ ‡πÜ */
@keyframes selectPulse{
  0%{transform:scale(1)}
  50%{transform:scale(1.08)}
  100%{transform:scale(1)}
}

.ripple{
  fill:none;
  stroke:#f53100;
  stroke-width:3;
  opacity:0.8;
  pointer-events:none;
  animation:ripple .8s ease-out forwards;
}

@keyframes ripple{
  from{r:0; opacity:1}
  to{r:45; opacity:0}
}

/* Night Mode */


:root{
  --bg:#eaf6f0;
  --panel:#ffffff;
  --building:#e9ecef;
  --text:#212529;
  
}

body{
  background:var(--bg);
  color:var(--text);
}

body.night{
  --bg:#0f172a;
  --panel:#020617;
  --road:#475569;
  --building:#1e293b;
  --text:#e5e7eb;
  
}
.content {
  color: #020202;
}
/*‡∏ã‡∏∏‡∏°gps*/
#mapSvg {
  transition: all 0.6s ease-in-out;
}

/*-----------------------------------------------------‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô------------------------------------------------------*/
</style>
</head>

<body>

<div id="sidebar">
  <h2>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h2>

  <input id="search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£">
  <select id="from"></select>
  <select id="to"></select>
  <button onclick="findRoute()">üß≠ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á</button>
  <button onclick="locateMe()">üìç ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</button>
<hr>
<button onclick="toggleNight()">üåô / üåû</button>

<h3>üìö ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£</h3>

<select id="buildingSelect" onchange="updateFloors()">
  <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£</option>
</select>

<select id="floorSelect" onchange="showRooms()">
  <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏±‡πâ‡∏ô</option>
</select>

<div id="roomList"></div>
<div class="content">
  <div id="info">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</div>
</div>
</div>
<div id="map-wrap">
<svg id="map" width="1000" height="800">

  
<defs>
  <linearGradient id="grassGrad" x1="0" y1="0" x2="0" y2="1">
    <stop offset="0%" stop-color="#dff2df"/>
    <stop offset="100%" stop-color="#cbe8cb"/>
  </linearGradient>
</defs>

<rect x="0" y="0" width="100%" height="100%"
      fill="url(#grassGrad)" rx="30"/>
<!-- ‡∏à‡∏∏‡∏î‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô -->
      
  <animate attributeName="r" from="12" to="28" dur="1.2s" repeatCount="indefinite"/>


<!-- ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÉ‡∏ô‡πÄ‡∏Å‡∏° -->
<g class="tree">
  <circle cx="150" cy="150" r="18" fill="#2d6a4f"/>
  <rect x="145" y="165" width="10" height="15" fill="#6c584c"/>
</g>

<!-- ‡∏ñ‡∏ô‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô -->
 <g class="road">
  <rect x="120" y="360" width="360" height="30" rx="10" fill="#b0b7bd"/>
<!-- ‡πÄ‡∏™‡πâ‡∏ô‡∏õ‡∏∞‡∏Å‡∏•‡∏≤‡∏á‡∏ñ‡∏ô‡∏ô ‡∏ö‡∏ß‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å 20-->
  <line x1="140" y1="375" x2="430" y2="375"
        stroke="#fff"
        stroke-width="3"
        stroke-dasharray="12,12"/>
</g>

 <g class="road">
  <rect x="0" y="550" width="450" height="40" rx="10" fill="#b0b7bd"/>
<!-- ‡∏≠‡∏∏‡∏î‡∏°‡∏™‡∏∏‡∏Ç-->
  <line x1="0" y1="570" x2="430" y2="570"
        stroke="#fff"
        stroke-width="3"
        stroke-dasharray="12,12"/>
</g>
<!-- -------------------------------------------------------- -->

<g class="road">
  <!-- ‡∏ï‡∏±‡∏ß‡∏ñ‡∏ô‡∏ô -->
  <rect x="440" y="60" width="40" height="800" rx="10" fill="#b0b7bd"/>
  
  <!-- ‡πÄ‡∏™‡πâ‡∏ô‡∏õ‡∏∞‡∏Å‡∏•‡∏≤‡∏á‡∏ñ‡∏ô‡∏ô ‡∏ö‡∏ß‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å 20 -->
  <line x1="460" y1="60" x2="460" y2="800"
        stroke="#ffffff"
        stroke-width="4"
        stroke-dasharray="12,12"/>
</g>

<g opacity="0.9">
  <circle cx="200" cy="200" r="8" fill="#4caf50"/>
  <circle cx="215" cy="210" r="6" fill="#43a047"/>
  <circle cx="185" cy="210" r="6" fill="#66bb6a"/>
</g>
  <!-- ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ -->
  <rect id="b4" x="560" y="290" width="100" height="80" class="building important"/>
  <rect id="b1" x="480" y="300" width="60" height="220" class="building learn"/>
  <rect id="b2" x="565" y="430" width="90" height="90" class="building learn"/>
  <rect id="b3" x="680" y="300" width="60" height="220" class="building learn"/>
  <rect id="b5" x="540" y="600" width="180" height="90" class="building important"/>
  <rect id="b6" x="480" y="160" width="70" height="130" class="building learn"/>
  <rect id="b7" x="550" y="140" width="110" height="80" class="building learn"/>
  <rect id="b8" x="300" y="290" width="130" height="70" class="building important"/>
  <rect id="b9" x="140" y="290" width="130" height="70" class="building learn"/>
  <circle id="b10" cx="370" cy="220" r="40" class="building important"/>
  <rect id="b11" x="155" y="220" width="100" height="40" class="building sport"/>
  <rect id="b12" x="560" y="530" width="100" height="60" class="building sport"/>

  <!-- ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å -->
  <text class= "label" x="610" y="330">‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏Å‡πà‡∏≤ </text> 
  <text class="label" x="510" y="400">‡∏ï‡∏∂‡∏Å 1</text>
  <text class="label" x="610" y="480">‡∏ï‡∏∂‡∏Å 2 </text>
  <text class="label" x="710" y="400">‡∏ï‡∏∂‡∏Å 3</text>
  <text class="label" x="630" y="650">‡∏ï‡∏∂‡∏Å 5 (‡∏¢‡∏¥‡∏°)</text>
  <text class="label" x="510" y="240">‡∏ï‡∏∂‡∏Å 6</text>
  <text class="label" x="600" y="190">‡∏ï‡∏∂‡∏Å 7</text>
  <text class="label" x="360" y="330">‡∏ï‡∏∂‡∏Å 8</text>
  <text class="label" x="200" y="330">‡∏ï‡∏∂‡∏Å 9</text>
  <text class="label" x="370" y="230">‡∏Ñ‡∏π‡∏´‡∏≤‡∏•‡∏π‡∏Å‡πÄ‡∏™‡∏∑‡∏≠</text>
  <text class="label" x="205" y="245">‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•</text>
  <text class="label" x="610" y="570">‡πÇ‡∏î‡∏°‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏™‡∏≤‡∏ò‡∏á</text>
  

  <!-- ‡πÄ‡∏™‡πâ‡∏ô‡∏ô‡∏≥‡∏ó‡∏≤‡∏á -->
  <path id="route"
        fill="none"
        stroke="red"
        stroke-width="1"
        stroke-dasharray="6 6"/>

  <!-- ‡∏´‡∏°‡∏∏‡∏î‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ + Ping -->
  <circle id="userMarker" r="6" fill="#ff595e" cx="-100" cy="-100"/>
  <circle id="userPulse" r="10" fill="none" stroke="#ff595e" stroke-width="2"
          cx="-100" cy="-100">
    <animate attributeName="r" from="6" to="18" dur="1.5s" repeatCount="indefinite"/>
    <animate attributeName="opacity" from="1" to="0" dur="1.5s" repeatCount="indefinite"/>
  </circle>

</svg>
</div>

<script>
/* ===== ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ + ‡∏û‡∏¥‡∏Å‡∏±‡∏î ===== */
const buildings = {
  1:{
    name:"‡∏ï‡∏∂‡∏Å 1 (‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏™‡∏∏‡∏ô‡∏µ‡∏¢‡πå ‡∏ô‡∏¥‡∏°‡∏°‡∏≤‡∏ô‡πÄ‡∏´‡∏°‡∏¥‡∏ô‡∏ó‡πå)",
    floors:{
      1:["1.‡∏´‡πâ‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢","2.‡∏´‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢","3.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô","4.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£","5.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏ö‡∏±‡∏ç‡∏ä‡∏µ","6.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ","7.‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡∏†‡∏π‡∏°‡∏¥","8.‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®","9.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå","10.‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π","11.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á"],
      2:["1.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô","2.‡∏´‡πâ‡∏≠‡∏á‡∏ä‡∏°‡∏£‡∏°‡∏û‡∏∏‡∏ó‡∏ò‡∏®‡∏≤‡∏™‡∏ô‡∏≤","3.‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏°‡∏π‡∏•‡∏ô‡∏¥‡∏ò‡∏¥‡∏Ø","4.‡∏´‡πâ‡∏≠‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡πÑ‡∏ó‡∏¢","5.‡∏´‡πâ‡∏≠‡∏á‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏≤‡∏á‡∏ô‡∏≤‡∏≠‡∏¥‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï"]
    },
    lat:13.675964,
    lng:100.616162,
    x:520,y:400
  },
  2:{
    name:"‡∏ï‡∏∂‡∏Å 2 (‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏£‡∏∏‡πà‡∏á‡πÄ‡∏£‡∏∑‡∏≠‡∏á)",
    floors:{
      1:["‡∏´‡πâ‡∏≠‡∏á‡∏®‡∏£‡∏µ‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏®‡∏£‡∏µ‡∏ô‡∏Ñ‡∏£‡∏¥‡∏ô‡∏ó‡∏£‡πå"],
      2:["‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡∏§‡∏©‡∏é‡∏µ 2 ‡∏´‡πâ‡∏≠‡∏á"],
      3:["‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡∏§‡∏©‡∏é‡∏µ 4 ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à"],
      4:["‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏´‡∏§‡∏©‡∏é‡∏µ 4 ‡∏´‡πâ‡∏≠‡∏á"]
    },
    lat:13.675516,
    lng:100.616204,
    x:600,y:480
  },
  3:{
    name:"‡∏ï‡∏∂‡∏Å 3 (‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏£‡∏∏‡πà‡∏á‡πÅ‡∏™‡∏á)",
    floors:{
      1:["1.‡∏´‡πâ‡∏≠‡∏á‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà","2.‡∏´‡πâ‡∏≠‡∏á‡∏ä‡∏°‡∏£‡∏°‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°","3.‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•","4.‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏§‡∏©‡∏é‡∏µ 1 ‡∏´‡πâ‡∏≠‡∏á","5.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡πÅ‡∏ô‡∏∞‡πÅ‡∏ô‡∏ß‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏´‡∏≤‡∏á‡∏≤‡∏ô","6.‡∏´‡πâ‡∏≠‡∏á ‡∏á‡∏≤‡∏ô‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà","7.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÅ‡∏•‡∏∞‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡πÅ‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π 1 ‡∏´‡πâ‡∏≠‡∏á"],
      2:["‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏§‡∏©‡∏é‡∏µ 8 ‡∏´‡πâ‡∏≠‡∏á, ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π 2 ‡∏´‡πâ‡∏≠‡∏á"],
      3:["‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏§‡∏©‡∏é‡∏µ 8 ‡∏´‡πâ‡∏≠‡∏á, ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π 2 ‡∏´‡πâ‡∏≠‡∏á"],
      4:["‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏§‡∏©‡∏é‡∏µ 8 ‡∏´‡πâ‡∏≠‡∏á, ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π 2 ‡∏´‡πâ‡∏≠‡∏á"]
    },
    lat:13.675565,
    lng:100.616701,
    x:710,y:400
  },
  4:{
    name:"‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏Å‡πà‡∏≤)",
    floors:{
      1:["‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÇ‡∏£‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏Å‡πà‡∏≤ ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏≠‡πÄ‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå"]
    },
    lat:13.675810,
    lng:100.616560,
    x:600,y:340
  },
  5:{
    name:"‡∏ï‡∏∂‡∏Å 5 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ä‡∏ô‡∏∞ ‡∏£‡∏∏‡πà‡∏á‡πÅ‡∏™‡∏á (‡∏û‡∏•‡∏®‡∏∂‡∏Å‡∏©‡∏≤)",
    floors:{
      1:["‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÇ‡∏£‡∏á‡∏û‡∏•‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏µ‡∏¨‡∏≤‡πÉ‡∏ô‡∏£‡πà‡∏°"]
    },
    lat:13.674959,
    lng:100.615678,
    x:630,y:620
  },
  6:{
    name:"‡∏ï‡∏∂‡∏Å 6 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 6",
    floors:{
      1:["1.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏™‡∏î","2.‡∏´‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏™‡∏°‡∏≤‡∏Ñ‡∏°‡∏®‡∏¥‡∏©‡∏¢‡πå‡πÄ‡∏Å‡πà‡∏≤‡∏û‡∏ì‡∏¥‡∏ä‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏≤‡∏á‡∏ô‡∏≤","3.‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ ‡∏ä‡∏≤‡∏¢-‡∏´‡∏ç‡∏¥‡∏á"],
      2:["1.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô","2.‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå","3.‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏ä‡∏≤‡∏¢-‡∏´‡∏ç‡∏¥‡∏á"],
      3:["1.‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó","2.‡∏´‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏£ 1 ‡∏´‡πâ‡∏≠‡∏á","3.‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥ 1 ‡∏´‡πâ‡∏≠‡∏á"],
      4:["1.‡∏´‡πâ‡∏≠‡∏á‡∏≠‡πÄ‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 1 ‡∏´‡πâ‡∏≠‡∏á","2.‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π 1 ‡∏´‡πâ‡∏≠‡∏á"],
      5:["1.‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ö‡∏±‡∏ì‡∏ë‡∏¥‡∏ï 4 ‡∏´‡πâ‡∏≠‡∏á"],
      6:["1.‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå","2.‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏ä‡∏≤‡∏¢-‡∏´‡∏ç‡∏¥‡∏á"]
    },
    lat:13.676365,
    lng:100.616584,
    x:510,y:250
  },
  7:{
    name:"‡∏ï‡∏∂‡∏Å 7 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 7",
    floors:{
      1:["1.‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ 2 ‡∏´‡πâ‡∏≠‡∏á","2.‡πÅ‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ä‡∏≤‡∏¢-‡∏´‡∏ç‡∏¥‡∏á"],
      2:["1.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô","2.‡∏´‡πâ‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏ß‡∏±‡∏î‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•","3.‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏ì‡∏∞ ‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î","4.‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏Ñ‡∏£‡∏π‡∏ä‡∏≤‡∏¢-‡∏´‡∏ç‡∏¥‡∏á"],
      3:["1.‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ 3 ‡∏´‡πâ‡∏≠‡∏á","2.‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ 1 ‡∏´‡πâ‡∏≠‡∏á","3.‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ ‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© 2 ‡∏´‡πâ‡∏≠‡∏á","4‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π 1 ‡∏´‡πâ‡∏≠‡∏á","5.‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏Ñ‡∏£‡∏π‡∏ä‡∏≤‡∏¢-‡∏´‡∏ç‡∏¥‡∏á"],
      4:["1.‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå 2 ‡∏´‡πâ‡∏≠‡∏á","2.‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏§‡∏©‡∏é‡∏µ 2 ‡∏´‡πâ‡∏≠‡∏á","3.‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π 1 ‡∏´‡πâ‡∏≠‡∏á","4.‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏Ñ‡∏£‡∏π 1 ‡∏´‡πâ‡∏≠‡∏á"],
      5:["1.‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå","2.‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à 1 ‡∏´‡πâ‡∏≠‡∏á","3.‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô ‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô 2 ‡∏´‡πâ‡∏≠‡∏á","4.‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô 1 ‡∏´‡πâ‡∏≠‡∏á","5.‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏ñ‡∏≠‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° 1 ‡∏´‡πâ‡∏≠‡∏á","6.‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏Ç‡∏≤‡∏ô‡∏∏‡∏Å‡∏≤‡∏£ 1 ‡∏´‡πâ‡∏≠‡∏á","7.‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏Ñ‡∏£‡∏π 1 ‡∏´‡πâ‡∏≠‡∏á"],
      6:["1.‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏î‡∏µ‡∏î‡πÑ‡∏ó‡∏¢ 4 ‡∏´‡πâ‡∏≠‡∏á","2., ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô 1 ‡∏´‡πâ‡∏≠‡∏á","3.‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π 1 ‡∏´‡πâ‡∏≠‡∏á","4.‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥‡∏Ñ‡∏£‡∏π 1 ‡∏´‡πâ‡∏≠‡∏á"]
    },
    lat:13.676215,
    lng:100.616862,
    x:575,y:190
  },
  8:{
    name:"‡∏ï‡∏∂‡∏Å 8 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏â‡∏•‡∏¥‡∏°‡∏û‡∏£‡∏∞‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥",
    floors:{
      1:["‡πÄ‡∏ß‡∏ó‡∏µ","‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏°"],
      2:["‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á"]
    },
    lat:13.676777,
    lng:100.616041,
    x:350,y:320
  },
  9:{
    name:"‡∏ï‡∏∂‡∏Å 9 ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 9",
    floors:{
      1:["‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ"],
      2:["‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£"]
    },
    lat:13.677137,
    lng:100.615595,
    x:200,y:330
  },
  10:{
    name:"‡∏Ñ‡∏π‡∏´‡∏≤‡∏•‡∏π‡∏Å‡πÄ‡∏™‡∏∑‡∏≠‡∏ß‡∏¥‡∏™‡∏≤‡∏°‡∏±‡∏ç",
    floors:{
      1:["‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏™‡∏£‡∏ì‡πå"]
    },
    lat:13.676957,
    lng:100.616329,
    x:370,y:220
  },
  11:{
    name:"‡∏™‡∏ô‡∏≤‡∏°‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•",
    floors:{
      1:["‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô","‡∏≠‡∏±‡∏í‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå"]
    },
    lat:13.677373,
    lng:100.615777,
    x:210,y:240
  },
  12:{
    name:"‡πÇ‡∏î‡∏°‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏™‡∏≤‡∏ò‡∏á",
    floors:{
      1:["‡∏™‡∏ô‡∏≤‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°","‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢"]
    },
    lat:13.675173,
    lng:100.615885,
    x:610,y:560
  }
};

/* ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ */
Object.keys(buildings).forEach(id=>{
  document.getElementById('b'+id).onclick=()=>showBuilding(id);
});

/* ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ */
function showBuilding(id){
  clearHighlight();
  document.getElementById('b'+id).classList.add('highlight');
  const b=buildings[id];
  info.innerHTML=
   `<h3>${b.name}</h3>
    <p>‡∏û‡∏¥‡∏Å‡∏±‡∏î (${b.x}, ${b.y})</p>
    <a target="_blank"
     href="https://www.google.com/maps/search/${encodeURIComponent(b.name)}">
     ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô Google Maps</a>`;
}
function clearHighlight(){
  document.querySelectorAll('.building')
    .forEach(e=>e.classList.remove('highlight'));
}

/* ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ */
search.oninput=()=>{
  for(const id in buildings){
    if(buildings[id].name.includes(search.value)){
      showBuilding(id); break;
    }
  }
};

/* dropdown */
for(const id in buildings){
  from.innerHTML+=`<option value="${id}">${buildings[id].name}</option>`;
  to.innerHTML+=`<option value="${id}">${buildings[id].name}</option>`;
}

/* ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏á */
function findRoute(){
  const a=buildings[from.value];
  const b=buildings[to.value];
  route.setAttribute(
    "d",`M ${a.x} ${a.y} Q 500 400 ${b.x} ${b.y}`
  );
}
/*‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏°‡∏∏‡∏°‡πÅ‡∏°‡∏û*/
const MAP_BOUNDS = {
  latMax: 13.677688,   // ‡∏ö‡∏ô‡∏™‡∏∏‡∏î
  latMin: 13.674667,   // ‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î
  lngMin: 100.613911,  // ‡∏ã‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î
  lngMax: 100.617127   // ‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î
};

function isInsideMap(lat, lng) {
  return (
    lat >= MAP_BOUNDS.latMin &&
    lat <= MAP_BOUNDS.latMax &&
    lng >= MAP_BOUNDS.lngMin &&
    lng <= MAP_BOUNDS.lngMax
  );
}

/* ‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (GPS ‚Üí X,Y) */
function locateMe(){
  if(!navigator.geolocation){
    alert("‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö GPS");
    return;
  }

  navigator.geolocation.getCurrentPosition(
    pos=>{
      const lat = pos.coords.latitude;
      const lng = pos.coords.longitude;

      if(!isInsideMap(lat,lng)){
        info.innerHTML = "‚ö†Ô∏è ‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤";
        userMarker.style.display = "none";
        userPulse.style.display = "none";
        return;
      }

      // ‡∏à‡∏∏‡∏î‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (‡πÉ‡∏ä‡πâ‡∏ï‡∏∂‡∏Å 1)
      

      function gpsToMap(lat, lng) {
  const mapWidth = 1000;
  const mapHeight = 800;

  const x = ((lng - MAP_BOUNDS.lngMin) /
            (MAP_BOUNDS.lngMax - MAP_BOUNDS.lngMin)) * mapWidth;

  const y = ((MAP_BOUNDS.latMax - lat) /
            (MAP_BOUNDS.latMax - MAP_BOUNDS.latMin)) * mapHeight;

  return { x, y };
}


      const { x, y } = gpsToMap(lat, lng);

      userMarker.setAttribute("cx", x);
      userMarker.setAttribute("cy", y);
      userPulse.setAttribute("cx", x);
      userPulse.setAttribute("cy", y);


      userMarker.style.display = "block";
      userPulse.style.display = "block";

      info.innerHTML = `
        <h3>üìç ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h3>
        <p>Lat ${lat.toFixed(6)}<br>Lng ${lng.toFixed(6)}</p>
      `;
    },
    err=>{
      alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á GPS ‡πÑ‡∏î‡πâ");
    },
    { enableHighAccuracy:true }
    
  );
}

       
/* Zoom + Drag */
let scale=1, panX=0, panY=0, down=false, sx=0, sy=0;
map.addEventListener('wheel',e=>{
  e.preventDefault();
  scale+=e.deltaY*-0.001;
  scale=Math.min(Math.max(.5,scale),2);
  update();
});
map.addEventListener('mousedown',e=>{
  down=true; sx=e.clientX-panX; sy=e.clientY-panY;
});
window.addEventListener('mouseup',()=>down=false);
window.addEventListener('mousemove',e=>{
  if(!down) return;
  panX=e.clientX-sx; panY=e.clientY-sy; update();
});
function update(){
  map.setAttribute(
    'transform',`translate(${panX},${panY}) scale(${scale})`
  );
}
const buildingSelect = document.getElementById("buildingSelect");
const floorSelect = document.getElementById("floorSelect");
const roomList = document.getElementById("roomList");

// ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π
for (const id in buildings) {
  buildingSelect.innerHTML +=
    `<option value="${id}">${buildings[id].name}</option>`;
}

function updateFloors() {
  floorSelect.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏±‡πâ‡∏ô</option>';
  roomList.innerHTML = "";

  const b = buildings[buildingSelect.value];
  if (!b) return;

  // ‡πÑ‡∏Æ‡πÑ‡∏•‡∏ï‡πå‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà
  clearHighlight();
  document.getElementById("b" + buildingSelect.value)?.classList.add("highlight");

  for (const floor in b.floors) {
    floorSelect.innerHTML +=
      `<option value="${floor}">‡∏ä‡∏±‡πâ‡∏ô ${floor}</option>`;
  }
}

function showRooms() {
  roomList.innerHTML = "";
  const b = buildings[buildingSelect.value];
  const f = floorSelect.value;
  if (!b || !f) return;

  let html = `<h4>${b.name} ‚Äì ‡∏ä‡∏±‡πâ‡∏ô ${f}</h4><ul>`;
  b.floors[f].forEach(r => {
    html += `<li>üè´ ${r}</li>`;
  });
  html += "</ul>";
  roomList.innerHTML = html;
}

</script>
<script>
function drawRouteToBuilding(buildingId, startX, startY){
  const b = document.getElementById(buildingId);

  const x = parseFloat(b.getAttribute("x"));
  const y = parseFloat(b.getAttribute("y"));
  const w = parseFloat(b.getAttribute("width"));
  const h = parseFloat(b.getAttribute("height"));

  const centerX = x + w / 2;
  const centerY = y + h / 2;

  const path = document.getElementById("route");
  path.setAttribute(
    "d",
    `M ${startX} ${startY} L ${centerX} ${centerY}`
  );
}
const svg = document.querySelector("svg");

document.querySelectorAll(".building").forEach(b=>{
  b.addEventListener("click", e=>{

    // ‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏Å‡πà‡∏≤
    document.querySelectorAll(".building").forEach(x=>{
      x.classList.remove("selected");
      x.classList.add("dim");
    });

    // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏∂‡∏Å‡∏ô‡∏µ‡πâ
    b.classList.remove("dim");
    b.classList.add("selected");

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á ripple
    const box = b.getBBox();
    const cx = box.x + box.width/2;
    const cy = box.y + box.height/2;

    const ripple = document.createElementNS("http://www.w3.org/2000/svg","circle");
    ripple.setAttribute("class","ripple");
    ripple.setAttribute("cx",cx);
    ripple.setAttribute("cy",cy);
    ripple.setAttribute("r",0);

    svg.appendChild(ripple);

    setTimeout(()=>ripple.remove(),800);
  });
});
function toggleNight(){
  document.body.classList.toggle("night");
}
/*‡∏ã‡∏∏‡∏°‡∏ï‡∏≠‡∏ô‡∏Å‡∏îgps*/
function zoomToUser(x, y, zoom = 2) {
  const svg = document.getElementById("map");
  svg.setAttribute(
    "viewBox",
    `${x - 500/zoom} ${y - 400/zoom} ${1000/zoom} ${800/zoom}`
  );
}


</script>

</body>
</html>
